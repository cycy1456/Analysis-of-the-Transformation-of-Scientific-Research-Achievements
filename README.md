# 科研成果转化分析智能体

科研成果转化分析智能体是一个自动化工具，用于帮助用户分析科研成果并提供转化建议。通过预定义的工作流，系统可以收集成果信息、分析市场潜力、查询相关专利并提供转化策略。

**现支持GitHub网页版部署！** 用户可以通过浏览器直接与智能体交互，无需本地安装。

## 功能特点

- **自动化工作流**：基于配置的工作流引擎，灵活处理不同类型的科研成果分析
- **文档识别能力**：支持识别和解析科研文档内容
- **专利查询功能**：可查询相关领域的现有专利情况
- **智能分析**：根据收集的信息提供转化建议和市场分析
- **多端界面支持**：命令行界面和网页界面双重支持，满足不同场景需求
- **实时在线交互功能**：支持WebSocket实时通信的在线聊天功能
- **完整的日志记录**：记录所有操作和分析结果，便于追踪和调试

## 系统架构

系统采用模块化设计，主要包含以下几个核心组件：

1. **工作流引擎**：负责协调和执行整个分析流程
2. **节点系统**：实现不同类型的操作节点（启动、结束、交互、条件判断）
3. **AI服务接口**：封装文档识别、专利查询等AI功能
4. **用户界面**：提供多端交互界面，包括命令行界面和网页界面
5. **配置管理**：处理工作流配置的加载和验证
6. **日志和错误处理**：记录系统运行状态并处理各种异常情况

## 快速开始

### 方式一：在线使用（推荐）

直接访问部署在GitHub Pages上的网页版本，无需本地安装即可使用：

1. 访问项目的GitHub Pages链接
2. 按照网页指引完成科研成果信息填写
3. 查看系统生成的分析报告

### 方式二：本地安装运行

#### 环境要求

- Python 3.8+
- 所需依赖包

#### 安装步骤

1. 克隆或下载项目到本地

2. 安装依赖包
```bash
pip install -r requirements.txt
```

## 使用方法

### 实时聊天功能

1. 访问Chat页面（聊天页面）
2. 系统会自动尝试连接到WebSocket服务器
3. 连接成功后，可以直接输入问题进行交流
4. 连接状态会在界面上显示（绿色表示连接正常，红色表示断开）
5. 如果连接断开，可以点击"重新连接"按钮尝试重新连接

### 可用的快捷问题

- 如何使用这个系统
- 什么是科研成果转化
- 可以分析哪些类型的科研成果
- 分析结果有多准确
- 如何提高转化成功率

### 注意事项

- 确保后端服务正在运行，WebSocket连接才能正常工作
- 网络不稳定可能导致连接断开，系统会自动尝试重连
- 对于复杂问题，响应时间可能会稍长

### 1. 准备配置文件

系统默认使用 `config/workflow_config.json` 作为工作流配置文件。您可以根据需要修改此配置文件或创建新的配置文件。

### 2. 运行智能体

在项目根目录执行以下命令启动分析智能体：

```bash
python -m src.main
```

或者指定配置文件路径：

```bash
python -m src.main --config /path/to/your/config.json
```

### 3. 交互流程

系统启动后，会引导您完成以下步骤：

1. 输入科研成果的基本信息
2. 上传相关文档（如果有）
3. 根据系统提示完成各步骤的交互
4. 查看最终的分析报告和转化建议

## 部署指南

### 前端部署（GitHub Pages）

项目提供了自动化部署脚本，支持一键构建和部署到GitHub Pages：

**Windows环境**：
```powershell
# 确保脚本有执行权限
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process

# 运行部署脚本
.\deploy.ps1
```

**Linux/Mac环境**：
```bash
# 确保脚本有执行权限
chmod +x deploy.sh

# 运行部署脚本
./deploy.sh
```

### 手动部署步骤

1. 修改 `web/vite.config.js` 中的 `base` 配置为您的GitHub仓库名称
2. 进入前端目录并构建项目：
```bash
cd web
npm install
npm run build
```
3. 部署到GitHub Pages：
```bash
npm run deploy
```

部署脚本会自动处理依赖安装、项目构建和GitHub Pages部署，并提供详细的部署状态信息。

### 后端部署

后端API服务可以部署到各种云服务平台：

#### Vercel部署
1. 创建Vercel账号并登录
2. 导入项目仓库
3. 配置Python运行环境
4. 设置环境变量（包括API密钥等）
5. 部署完成后获取API URL

#### AWS Lambda部署
1. 创建Lambda函数
2. 打包Python依赖和代码
3. 配置API Gateway
4. 设置环境变量

#### 其他部署选项
- **Heroku**：适合全栈应用部署
- **Netlify Functions**：类似于Vercel，支持无服务器函数
- **Google Cloud Functions**：适合需要与其他GCP服务集成的场景
- **阿里云函数计算**：国内用户的良好选择

### 环境变量配置

部署时需要配置以下环境变量：

```
DOUBAO_API_KEY=your_api_key_here
DOUBAO_MODEL=ERNIE-Bot-4
SERVER_PORT=8000
SERVER_HOST=0.0.0.0
CORS_ORIGINS=https://yourusername.github.io
```

## 工作流配置说明

工作流配置文件采用JSON格式，主要包含以下部分：

- **name**: 工作流名称
- **description**: 工作流描述
- **triggers**: 触发条件（目前支持手动触发）
- **nodes**: 工作流节点定义
- **variables**: 工作流变量定义
- **version**: 配置版本

每个节点包含以下属性：
- **id**: 节点唯一标识
- **type**: 节点类型（start, end, interaction, condition）
- **name**: 节点名称
- **description**: 节点描述
- **config**: 节点配置（根据节点类型不同而不同）
- **next_nodes**: 下一节点定义

## 扩展开发

### 添加新的节点类型

1. 在 `src/nodes/` 目录下创建新的节点类，继承自 `Node` 基类
2. 实现必要的方法（如 `execute`）
3. 在 `src/nodes/__init__.py` 中注册新节点

### 实现真实的AI服务

1. 在 `src/services/` 目录下创建服务实现类，继承自相应的服务基类
2. 实现抽象方法，连接到真实的AI服务API
3. 在 `src/services/__init__.py` 中更新服务工厂函数

### 前端开发

1. 前端代码位于 `web/` 目录
2. 修改或创建新的React组件
3. 开发模式运行：
```bash
cd web
npm install
npm run dev
```
4. 构建生产版本：
```bash
npm run build
```
5. 使用提供的部署脚本一键部署到GitHub Pages

## 日志系统

系统日志保存在 `logs/` 目录下，按日期和时间命名。日志级别可在配置中设置，支持DEBUG、INFO、WARNING、ERROR、CRITICAL五个级别。

## 故障排除

1. **配置文件不存在**：确保配置文件位于正确的路径，或使用 `--config` 参数指定
2. **节点执行失败**：检查日志文件中的详细错误信息
3. **AI服务调用失败**：目前使用的是模拟服务，如果需要连接真实服务，请参考扩展开发部分

## 许可证

[MIT](LICENSE)

## 联系方式

如有问题或建议，请联系开发团队。